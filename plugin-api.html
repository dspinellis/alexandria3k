<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Python plugin API &#8212; alexandria3k 3.6.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=5349f462"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Python utility API" href="utility-api.html" />
    <link rel="prev" title="Link works with their ASJC subject codes" href="link_works_asjcs.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="python-plugin-api">
<h1>Python plugin API<a class="headerlink" href="#python-plugin-api" title="Link to this heading">¶</a></h1>
<p>The <em>alexandria3k</em> plugin API allows the addition of data sources
and processing routines.
These can be contributed to <em>alexandria3k</em> or used in parallel with it.</p>
<section id="module-db_schema">
<span id="db-schema"></span><h2>db_schema<a class="headerlink" href="#module-db_schema" title="Link to this heading">¶</a></h2>
<p>A module supporting virtual database table schema definition.</p>
<dl class="py class">
<dt class="sig sig-object py" id="db_schema.ColumnMeta">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">db_schema.</span></span><span class="sig-name descname"><span class="pre">ColumnMeta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_extractor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.ColumnMeta" title="Link to this definition">¶</a></dt>
<dd><p>A container for column meta-data</p>
<dl class="py method">
<dt class="sig sig-object py" id="db_schema.ColumnMeta.get_definition">
<span class="sig-name descname"><span class="pre">get_definition</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.ColumnMeta.get_definition" title="Link to this definition">¶</a></dt>
<dd><p>Return column’s DDL definition</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="db_schema.ColumnMeta.get_description">
<span class="sig-name descname"><span class="pre">get_description</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.ColumnMeta.get_description" title="Link to this definition">¶</a></dt>
<dd><p>Return column’s description, if any</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="db_schema.ColumnMeta.get_name">
<span class="sig-name descname"><span class="pre">get_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.ColumnMeta.get_name" title="Link to this definition">¶</a></dt>
<dd><p>Return column’s name</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="db_schema.ColumnMeta.get_value_extractor">
<span class="sig-name descname"><span class="pre">get_value_extractor</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.ColumnMeta.get_value_extractor" title="Link to this definition">¶</a></dt>
<dd><p>Return the column’s value defined extraction function</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="db_schema.TableMeta">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">db_schema.</span></span><span class="sig-name descname"><span class="pre">TableMeta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.TableMeta" title="Link to this definition">¶</a></dt>
<dd><p>A container for table meta-data</p>
<dl class="py method">
<dt class="sig sig-object py" id="db_schema.TableMeta.get_column_definition_by_name">
<span class="sig-name descname"><span class="pre">get_column_definition_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.TableMeta.get_column_definition_by_name" title="Link to this definition">¶</a></dt>
<dd><p>Return defined column definition DDL for column name</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="db_schema.TableMeta.get_columns">
<span class="sig-name descname"><span class="pre">get_columns</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.TableMeta.get_columns" title="Link to this definition">¶</a></dt>
<dd><p>Return the table’s columns</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="db_schema.TableMeta.get_cursor_class">
<span class="sig-name descname"><span class="pre">get_cursor_class</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.TableMeta.get_cursor_class" title="Link to this definition">¶</a></dt>
<dd><p>Return the table’s specified cursor class</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="db_schema.TableMeta.get_extract_multiple">
<span class="sig-name descname"><span class="pre">get_extract_multiple</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.TableMeta.get_extract_multiple" title="Link to this definition">¶</a></dt>
<dd><p>Return the function for obtaining multiple records</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="db_schema.TableMeta.get_foreign_key">
<span class="sig-name descname"><span class="pre">get_foreign_key</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.TableMeta.get_foreign_key" title="Link to this definition">¶</a></dt>
<dd><p>Return our column that refers to the parent table’s primary key</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="db_schema.TableMeta.get_name">
<span class="sig-name descname"><span class="pre">get_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.TableMeta.get_name" title="Link to this definition">¶</a></dt>
<dd><p>Return the table’s name</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="db_schema.TableMeta.get_parent_extract_multiple">
<span class="sig-name descname"><span class="pre">get_parent_extract_multiple</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.TableMeta.get_parent_extract_multiple" title="Link to this definition">¶</a></dt>
<dd><p>Return the function for obtaining multiple records from the parent table</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="db_schema.TableMeta.get_parent_name">
<span class="sig-name descname"><span class="pre">get_parent_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.TableMeta.get_parent_name" title="Link to this definition">¶</a></dt>
<dd><p>Return the name of the main table of which this has details</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="db_schema.TableMeta.get_post_population_script">
<span class="sig-name descname"><span class="pre">get_post_population_script</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.TableMeta.get_post_population_script" title="Link to this definition">¶</a></dt>
<dd><p>Return the SQL command to run after the table is populated</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="db_schema.TableMeta.get_primary_key">
<span class="sig-name descname"><span class="pre">get_primary_key</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.TableMeta.get_primary_key" title="Link to this definition">¶</a></dt>
<dd><p>Return the parent table’s column name that refers to our
foreign key</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="db_schema.TableMeta.get_value_extractor_by_name">
<span class="sig-name descname"><span class="pre">get_value_extractor_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.TableMeta.get_value_extractor_by_name" title="Link to this definition">¶</a></dt>
<dd><p>Return defined value extraction function for column name</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="db_schema.TableMeta.get_value_extractor_by_ordinal">
<span class="sig-name descname"><span class="pre">get_value_extractor_by_ordinal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.TableMeta.get_value_extractor_by_ordinal" title="Link to this definition">¶</a></dt>
<dd><p>Return defined value extraction function for column at ordinal i</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="db_schema.TableMeta.insert_statement">
<span class="sig-name descname"><span class="pre">insert_statement</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.TableMeta.insert_statement" title="Link to this definition">¶</a></dt>
<dd><p>Return an SQL command to insert data into the table</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="db_schema.TableMeta.table_schema">
<span class="sig-name descname"><span class="pre">table_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#db_schema.TableMeta.table_schema" title="Link to this definition">¶</a></dt>
<dd><p>Return the SQL command to create a table’s schema with the
optional specified prefix.
A columns array can be used to specify which columns to include.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-data_source">
<span id="data-source"></span><h2>data_source<a class="headerlink" href="#module-data_source" title="Link to this heading">¶</a></h2>
<p>A module supporting queries and database population through
(possibly partitioned) virtual database tables.</p>
<dl class="py data">
<dt class="sig sig-object py" id="data_source.CONTAINER_ID_COLUMN">
<span class="sig-prename descclassname"><span class="pre">data_source.</span></span><span class="sig-name descname"><span class="pre">CONTAINER_ID_COLUMN</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#data_source.CONTAINER_ID_COLUMN" title="Link to this definition">¶</a></dt>
<dd><p>int: by convention column 1 of each table hold the container (file) id.
This can e.g. be the index of the file in an array of container files
or an increasing counter over a streamed collection.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="data_source.CONTAINER_INDEX">
<span class="sig-prename descclassname"><span class="pre">data_source.</span></span><span class="sig-name descname"><span class="pre">CONTAINER_INDEX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#data_source.CONTAINER_INDEX" title="Link to this definition">¶</a></dt>
<dd><p>int: database table index using the container id.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="data_source.DataFiles">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">data_source.</span></span><span class="sig-name descname"><span class="pre">DataFiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_extension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_name_regex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.DataFiles" title="Link to this definition">¶</a></dt>
<dd><p>The source of compressed data files</p>
<dl class="py method">
<dt class="sig sig-object py" id="data_source.DataFiles.get_container_iterator">
<span class="sig-name descname"><span class="pre">get_container_iterator</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.DataFiles.get_container_iterator" title="Link to this definition">¶</a></dt>
<dd><p>Return an iterator over the int identifiers of all data files</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.DataFiles.get_container_name">
<span class="sig-name descname"><span class="pre">get_container_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.DataFiles.get_container_name" title="Link to this definition">¶</a></dt>
<dd><p>Return the name of the file corresponding to the specified fid</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.DataFiles.get_file_array">
<span class="sig-name descname"><span class="pre">get_file_array</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.DataFiles.get_file_array" title="Link to this definition">¶</a></dt>
<dd><p>Return the array of data files</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="data_source.DataSource">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">data_source.</span></span><span class="sig-name descname"><span class="pre">DataSource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tables</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attach_databases</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.DataSource" title="Link to this definition">¶</a></dt>
<dd><p>Create a meta-data object that supports queries over its
(virtual) tables and the population of an SQLite database with its
data.
This is an abstract parent class of concrete data source classes
that implement each data source, such as Crossref, PubMed,
ORCID, and USPTO.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_source</strong> (<em>object</em>) – An object that shall supply the database elements.
Its type depends on the requirements of the subclass inheriting
DataSource.</p></li>
<li><p><strong>tables</strong> (<a class="reference internal" href="#db_schema.TableMeta" title="db_schema.TableMeta"><em>TableMeta</em></a>) – A list of the table metadata associated with the data source
The first table in the list shall be the root table of the hierarchy.</p></li>
<li><p><strong>attach_databases</strong> (<em>list</em><em>, </em><em>optional</em>) – A list of colon-joined tuples specifying
a database name and its path, defaults to <cite>None</cite>.
The specified databases are attached and made available to the
query and the population condition through the specified database
name.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="data_source.DataSource.add_column">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_column</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dictionary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.DataSource.add_column" title="Link to this definition">¶</a></dt>
<dd><p>Add a column required for executing a query to the
specified dictionary</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.DataSource.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.DataSource.close" title="Link to this definition">¶</a></dt>
<dd><p>Terminate use of the data source, freeing associated resources.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.DataSource.download">
<span class="sig-name descname"><span class="pre">download</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_location</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sql_query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.DataSource.download" title="Link to this definition">¶</a></dt>
<dd><p>Download the data source to the specified data location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_location</strong> (<em>object</em>) – The file or directory path to store
for the downloaded data.</p></li>
<li><p><strong>database</strong> (<em>str</em><em>, </em><em>optional</em>) – An optional path, specifying an SQLite database
to use for retrieving the records to populate.</p></li>
<li><p><strong>sql_query</strong> (<em>str</em><em>, </em><em>optional</em>) – An SQL <cite>SELECT</cite> query specifying the required data,
defaults to <cite>None</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.DataSource.get_query_column_names">
<span class="sig-name descname"><span class="pre">get_query_column_names</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.DataSource.get_query_column_names" title="Link to this definition">¶</a></dt>
<dd><p>Return the column names associated with an executing query</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.DataSource.get_table_meta_by_name">
<span class="sig-name descname"><span class="pre">get_table_meta_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.DataSource.get_table_meta_by_name" title="Link to this definition">¶</a></dt>
<dd><p>Return the metadata of the specified table</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.DataSource.get_virtual_db">
<span class="sig-name descname"><span class="pre">get_virtual_db</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.DataSource.get_virtual_db" title="Link to this definition">¶</a></dt>
<dd><p>Return the virtual table database as an apsw object</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.DataSource.populate">
<span class="sig-name descname"><span class="pre">populate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">database_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">condition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.DataSource.populate" title="Link to this definition">¶</a></dt>
<dd><p>Populate the specified SQLite database using the data specified
in the object constructor’s call.
The database is created if it does not exist.
If it exists, the tables to be populated are dropped
(if they exist) and recreated anew as specified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>database_path</strong> (<em>str</em>) – The path specifying the SQLite database
to populate.</p></li>
<li><p><strong>columns</strong> (<em>list</em><em>, </em><em>optional</em>) – A list of strings specifying the columns to
populate, defaults to <cite>None</cite>.  The strings are of the form
<cite>table_name.column_name</cite> or <cite>table_name.*</cite>.</p></li>
<li><p><strong>condition</strong> (<em>str</em><em>, </em><em>optional</em>) – <a class="reference external" href="https://www.sqlite.org/syntax/expr.html">SQL expression</a> specifying the rows to include
in the database’s population, defaults to <cite>None</cite>.
The expression can contain references to the table’s columns,
to tables in attached databases prefixed by their name, and
tables in the database being populated prefixed by <cite>populated</cite>.
Implicitly, if a main table is populated, its details tables
will only get populated with the records associated with the
corresponding main table’s record.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.DataSource.query">
<span class="sig-name descname"><span class="pre">query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.DataSource.query" title="Link to this definition">¶</a></dt>
<dd><p>Run the specified query on the virtual database using the data
specified in the object constructor’s call.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – An SQL <cite>SELECT</cite> query specifying the required data.</p></li>
<li><p><strong>partition</strong> (<em>bool</em><em>, </em><em>optional</em>) – When true the query will run separately in each
container, defaults to <cite>False</cite>.
Queries involving table joins will run substantially faster
if access to each table’s records is restricted with
an expression <cite>table_name.container_id = CONTAINER_ID</cite>, and
the <cite>partition</cite> argument is set to true.
In such a case the query is repeatedly run over each database
partition (compressed JSON file) with <cite>CONTAINER_ID</cite> iterating
sequentially to cover all partitions.
The query’s result is the concatenation of the individual partition
results.
Running queries with joins without partitioning will often result
in quadratic (or worse) algorithmic complexity.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An iterable over the query’s results.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>iterable</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.DataSource.set_query_columns">
<span class="sig-name descname"><span class="pre">set_query_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.DataSource.set_query_columns" title="Link to this definition">¶</a></dt>
<dd><p>Set the columns a query requires to run as a set in
self.query_columns by invoking the tracer</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.DataSource.tables_transitive_closure">
<span class="sig-name descname"><span class="pre">tables_transitive_closure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.DataSource.tables_transitive_closure" title="Link to this definition">¶</a></dt>
<dd><p>Return the transitive closure of all named tables
with all the ones required to reach the specified top</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="data_source.ElementsCursor">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">data_source.</span></span><span class="sig-name descname"><span class="pre">ElementsCursor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_cursor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.ElementsCursor" title="Link to this definition">¶</a></dt>
<dd><p>An (abstract) cursor over a collection of data embedded within
another cursor.</p>
<dl class="py method">
<dt class="sig sig-object py" id="data_source.ElementsCursor.Close">
<span class="sig-name descname"><span class="pre">Close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.ElementsCursor.Close" title="Link to this definition">¶</a></dt>
<dd><p>Cursor’s destructor, used for cleanup</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.ElementsCursor.Column">
<span class="sig-name descname"><span class="pre">Column</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.ElementsCursor.Column" title="Link to this definition">¶</a></dt>
<dd><p>Return the value of the column with ordinal col</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.ElementsCursor.Eof">
<span class="sig-name descname"><span class="pre">Eof</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.ElementsCursor.Eof" title="Link to this definition">¶</a></dt>
<dd><p>Return True when the end of the table’s records has been reached.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.ElementsCursor.Filter">
<span class="sig-name descname"><span class="pre">Filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.ElementsCursor.Filter" title="Link to this definition">¶</a></dt>
<dd><p>Always called first to initialize an iteration to the first row
of the table</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.ElementsCursor.Next">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.ElementsCursor.Next" title="Link to this definition">¶</a></dt>
<dd><p>Advance reading to the next available element.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.ElementsCursor.Rowid">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Rowid</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.ElementsCursor.Rowid" title="Link to this definition">¶</a></dt>
<dd><p>Return a unique id of the row along all records</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.ElementsCursor.container_id">
<span class="sig-name descname"><span class="pre">container_id</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.ElementsCursor.container_id" title="Link to this definition">¶</a></dt>
<dd><p>Return the id of the container containing the data being fetched.
Not part of the apsw API.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.ElementsCursor.current_row_value">
<span class="sig-name descname"><span class="pre">current_row_value</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.ElementsCursor.current_row_value" title="Link to this definition">¶</a></dt>
<dd><p>Return the current row. Not part of the apsw API.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.ElementsCursor.record_id">
<span class="sig-name descname"><span class="pre">record_id</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.ElementsCursor.record_id" title="Link to this definition">¶</a></dt>
<dd><p>Return the record’s identifier. Not part of the apsw API.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="data_source.FilesCursor">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">data_source.</span></span><span class="sig-name descname"><span class="pre">FilesCursor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_file_cache</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.FilesCursor" title="Link to this definition">¶</a></dt>
<dd><p>A cursor that iterates over the files in a directory
Not used directly by an SQLite table</p>
<dl class="py method">
<dt class="sig sig-object py" id="data_source.FilesCursor.Filter">
<span class="sig-name descname"><span class="pre">Filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_index_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constraint_args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.FilesCursor.Filter" title="Link to this definition">¶</a></dt>
<dd><p>Always called first to initialize an iteration to the first
(possibly constrained) row of the table</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.FilesCursor.Next">
<span class="sig-name descname"><span class="pre">Next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.FilesCursor.Next" title="Link to this definition">¶</a></dt>
<dd><p>Advance reading to the next available file. Files are assumed to be
non-empty.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.FilesCursor.debug_progress_bar">
<span class="sig-name descname"><span class="pre">debug_progress_bar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.FilesCursor.debug_progress_bar" title="Link to this definition">¶</a></dt>
<dd><p>Print a progress bar</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="data_source.ItemsCursor">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">data_source.</span></span><span class="sig-name descname"><span class="pre">ItemsCursor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.ItemsCursor" title="Link to this definition">¶</a></dt>
<dd><p>A cursor over the items of data files. Internal use only.
Not used directly by an SQLite table.</p>
<dl class="py method">
<dt class="sig sig-object py" id="data_source.ItemsCursor.Close">
<span class="sig-name descname"><span class="pre">Close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.ItemsCursor.Close" title="Link to this definition">¶</a></dt>
<dd><p>Cursor’s destructor, used for cleanup</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.ItemsCursor.Eof">
<span class="sig-name descname"><span class="pre">Eof</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.ItemsCursor.Eof" title="Link to this definition">¶</a></dt>
<dd><p>Return True when the end of the table’s records has been reached.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.ItemsCursor.Rowid">
<span class="sig-name descname"><span class="pre">Rowid</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.ItemsCursor.Rowid" title="Link to this definition">¶</a></dt>
<dd><p>Return a unique id of the row along all records</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.ItemsCursor.current_row_value">
<span class="sig-name descname"><span class="pre">current_row_value</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.ItemsCursor.current_row_value" title="Link to this definition">¶</a></dt>
<dd><p>Return the current row. Not part of the apsw API.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="data_source.NestedElementsCursor">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">data_source.</span></span><span class="sig-name descname"><span class="pre">NestedElementsCursor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_cursor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.NestedElementsCursor" title="Link to this definition">¶</a></dt>
<dd><p>An abstract cursor designed to facilitate iterating over elements nested within a
parent element. It depends on the implementation of the abstract method element_name.</p>
<dl class="py method">
<dt class="sig sig-object py" id="data_source.NestedElementsCursor.Next">
<span class="sig-name descname"><span class="pre">Next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.NestedElementsCursor.Next" title="Link to this definition">¶</a></dt>
<dd><p>Advance reading to the next available nested element. If the
current list of elements is exhausted, it fetches the next list from the
parent cursor.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.NestedElementsCursor.element_name">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">element_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.NestedElementsCursor.element_name" title="Link to this definition">¶</a></dt>
<dd><p>The record key from which to retrieve the nested elements from the current row
of the parent cursor. Not part of the apsw API.</p>
</dd></dl>

</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="data_source.PROGRESS_BAR_LENGTH">
<span class="sig-prename descclassname"><span class="pre">data_source.</span></span><span class="sig-name descname"><span class="pre">PROGRESS_BAR_LENGTH</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">50</span></em><a class="headerlink" href="#data_source.PROGRESS_BAR_LENGTH" title="Link to this definition">¶</a></dt>
<dd><p>int: length of the progress bar printed during database population.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="data_source.ROWID_COLUMN">
<span class="sig-prename descclassname"><span class="pre">data_source.</span></span><span class="sig-name descname"><span class="pre">ROWID_COLUMN</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-1</span></em><a class="headerlink" href="#data_source.ROWID_COLUMN" title="Link to this definition">¶</a></dt>
<dd><p>int: column that denotes the internally used SQLite rowid integer row
identifier.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="data_source.ROWID_INDEX">
<span class="sig-prename descclassname"><span class="pre">data_source.</span></span><span class="sig-name descname"><span class="pre">ROWID_INDEX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#data_source.ROWID_INDEX" title="Link to this definition">¶</a></dt>
<dd><p>int: database table index using the row id.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="data_source.RecordsCursor">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">data_source.</span></span><span class="sig-name descname"><span class="pre">RecordsCursor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">files_cursor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.RecordsCursor" title="Link to this definition">¶</a></dt>
<dd><p>A cursor for iterating over records within nested elements.</p>
<p>A record could correspond to e.g. the metadata of a publication.
Multiple records can appear in a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table</strong> (<a class="reference internal" href="#data_source.StreamingTable" title="data_source.StreamingTable"><em>StreamingTable</em></a>) – A StreamingTable object representing the table structure.</p></li>
<li><p><strong>file_cursor</strong> (<em>object</em>) – A cursor that iterates over the elements in a file.
The behavior of this cursor may depend on whether the file is
compressed and the type of file being processed.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="data_source.RecordsCursor.Close">
<span class="sig-name descname"><span class="pre">Close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.RecordsCursor.Close" title="Link to this definition">¶</a></dt>
<dd><p>Cursor’s destructor, used for cleanup</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.RecordsCursor.Column">
<span class="sig-name descname"><span class="pre">Column</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.RecordsCursor.Column" title="Link to this definition">¶</a></dt>
<dd><p>Return the value of the column with ordinal col</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.RecordsCursor.Eof">
<span class="sig-name descname"><span class="pre">Eof</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.RecordsCursor.Eof" title="Link to this definition">¶</a></dt>
<dd><p>Return True when the end of the table’s records has been reached.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.RecordsCursor.Filter">
<span class="sig-name descname"><span class="pre">Filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constraint_args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.RecordsCursor.Filter" title="Link to this definition">¶</a></dt>
<dd><p>Always called first to initialize an iteration to the first row
of the table according to the index</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.RecordsCursor.Next">
<span class="sig-name descname"><span class="pre">Next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.RecordsCursor.Next" title="Link to this definition">¶</a></dt>
<dd><p>Advance to the next item.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.RecordsCursor.Rowid">
<span class="sig-name descname"><span class="pre">Rowid</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.RecordsCursor.Rowid" title="Link to this definition">¶</a></dt>
<dd><p>Return a unique id of the row along all records</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.RecordsCursor.container_id">
<span class="sig-name descname"><span class="pre">container_id</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.RecordsCursor.container_id" title="Link to this definition">¶</a></dt>
<dd><p>Return the id of the container containing the data being fetched.
Not part of the apsw API.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.RecordsCursor.current_row_value">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">current_row_value</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.RecordsCursor.current_row_value" title="Link to this definition">¶</a></dt>
<dd><p>Return the current row. Not part of the apsw API.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.RecordsCursor.element_name">
<span class="sig-name descname"><span class="pre">element_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.RecordsCursor.element_name" title="Link to this definition">¶</a></dt>
<dd><p>The work key from which to retrieve the elements. Not part of the
apsw API.</p>
</dd></dl>

</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="data_source.SINGLE_PARTITION_INDEX">
<span class="sig-prename descclassname"><span class="pre">data_source.</span></span><span class="sig-name descname"><span class="pre">SINGLE_PARTITION_INDEX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'SINGLE_PARTITION'</span></em><a class="headerlink" href="#data_source.SINGLE_PARTITION_INDEX" title="Link to this definition">¶</a></dt>
<dd><p>str: denote a table with a single partition by setting or comparing for
equality an index value to this reference.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="data_source.StreamingCachedContainerTable">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">data_source.</span></span><span class="sig-name descname"><span class="pre">StreamingCachedContainerTable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_meta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample=&lt;function</span> <span class="pre">StreamingTable.&lt;lambda&gt;&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.StreamingCachedContainerTable" title="Link to this definition">¶</a></dt>
<dd><p>An apsw table streaming over data of the supplied table metadata.
This works over a cached data container (e.g. a parsed JSON or XML
file) that allows indexing entries within it.</p>
<dl class="py method">
<dt class="sig sig-object py" id="data_source.StreamingCachedContainerTable.BestIndex">
<span class="sig-name descname"><span class="pre">BestIndex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_orderbys</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.StreamingCachedContainerTable.BestIndex" title="Link to this definition">¶</a></dt>
<dd><p>Called by the Engine to determine the best available index
for the operation at hand</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="data_source.StreamingTable">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">data_source.</span></span><span class="sig-name descname"><span class="pre">StreamingTable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_meta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample=&lt;function</span> <span class="pre">StreamingTable.&lt;lambda&gt;&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.StreamingTable" title="Link to this definition">¶</a></dt>
<dd><p>An apsw table streaming over data of the supplied table metadata</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_meta</strong> (<a class="reference internal" href="#db_schema.TableMeta" title="db_schema.TableMeta"><em>TableMeta</em></a>) – The table’s metadata.</p></li>
<li><p><strong>table_dict</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><a class="reference internal" href="#db_schema.TableMeta" title="db_schema.TableMeta"><em>TableMeta</em></a><em>]</em>) – A map from table names to their metadata.</p></li>
<li><p><strong>data_source</strong> (<em>object</em>) – An object that is used to supply the database
elements.  Its type depends on the requirements of the subclass
inheriting DataSource.</p></li>
<li><p><strong>sample</strong> (<em>callable</em><em>, </em><em>optional</em>) – A callable to control container sampling, defaults
to <cite>lambda n: True</cite>.
The population or query method will call this argument
for each Crossref container file with each container’s file
name as its argument.  When the callable returns <cite>True</cite> the
container file will get processed, when it returns <cite>False</cite> the
container will get skipped.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="data_source.StreamingTable.BestIndex">
<span class="sig-name descname"><span class="pre">BestIndex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_constraints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_orderbys</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.StreamingTable.BestIndex" title="Link to this definition">¶</a></dt>
<dd><p>Called by the Engine to determine the best available index
for the operation at hand</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.StreamingTable.Destroy">
<span class="sig-name descname"><span class="pre">Destroy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.StreamingTable.Destroy" title="Link to this definition">¶</a></dt>
<dd><p>Called when a reference to a virtual table is no longer used</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.StreamingTable.Disconnect">
<span class="sig-name descname"><span class="pre">Disconnect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.StreamingTable.Disconnect" title="Link to this definition">¶</a></dt>
<dd><p>Called when a reference to a virtual table is no longer used</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.StreamingTable.Open">
<span class="sig-name descname"><span class="pre">Open</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.StreamingTable.Open" title="Link to this definition">¶</a></dt>
<dd><p>Return the table’s cursor object</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.StreamingTable.cursor">
<span class="sig-name descname"><span class="pre">cursor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_meta</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.StreamingTable.cursor" title="Link to this definition">¶</a></dt>
<dd><p>Return the cursor associated with this table.  The constructor
for cursors embedded in others takes a parent cursor argument.  To
handle this requirement, this method recursively calls itself until
it reaches the top-level table.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.StreamingTable.get_data_source">
<span class="sig-name descname"><span class="pre">get_data_source</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.StreamingTable.get_data_source" title="Link to this definition">¶</a></dt>
<dd><p>Return the data source of this table</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.StreamingTable.get_table_meta">
<span class="sig-name descname"><span class="pre">get_table_meta</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#data_source.StreamingTable.get_table_meta" title="Link to this definition">¶</a></dt>
<dd><p>Return the metadata of this table</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.StreamingTable.get_table_meta_by_name">
<span class="sig-name descname"><span class="pre">get_table_meta_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.StreamingTable.get_table_meta_by_name" title="Link to this definition">¶</a></dt>
<dd><p>Return the metadata of the specified table</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.StreamingTable.get_value_extractor_by_ordinal">
<span class="sig-name descname"><span class="pre">get_value_extractor_by_ordinal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column_ordinal</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.StreamingTable.get_value_extractor_by_ordinal" title="Link to this definition">¶</a></dt>
<dd><p>Return the value extraction function for column at specified
ordinal.  Not part of the apsw interface.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="data_source.StreamingTable.sample">
<span class="sig-name descname"><span class="pre">sample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#data_source.StreamingTable.sample" title="Link to this definition">¶</a></dt>
<dd><p>Return true if the identified data element should be included
in the sample given in the table’s constructor.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-csv_source">
<span id="csv-source"></span><h2>csv_source<a class="headerlink" href="#module-csv_source" title="Link to this heading">¶</a></h2>
<p>Functions providing virtual table access to CSV data sources.</p>
<dl class="py class">
<dt class="sig sig-object py" id="csv_source.CsvCursor">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">csv_source.</span></span><span class="sig-name descname"><span class="pre">CsvCursor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#csv_source.CsvCursor" title="Link to this definition">¶</a></dt>
<dd><p>A virtual table cursor over CSV data.</p>
<dl class="py method">
<dt class="sig sig-object py" id="csv_source.CsvCursor.Close">
<span class="sig-name descname"><span class="pre">Close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#csv_source.CsvCursor.Close" title="Link to this definition">¶</a></dt>
<dd><p>Cursor’s destructor, used for cleanup</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="csv_source.CsvCursor.Column">
<span class="sig-name descname"><span class="pre">Column</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#csv_source.CsvCursor.Column" title="Link to this definition">¶</a></dt>
<dd><p>Return the value of the column with ordinal col</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="csv_source.CsvCursor.Eof">
<span class="sig-name descname"><span class="pre">Eof</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#csv_source.CsvCursor.Eof" title="Link to this definition">¶</a></dt>
<dd><p>Return True when the end of the table’s records has been reached.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="csv_source.CsvCursor.Filter">
<span class="sig-name descname"><span class="pre">Filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_index_number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_index_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_constraint_args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#csv_source.CsvCursor.Filter" title="Link to this definition">¶</a></dt>
<dd><p>Always called first to initialize an iteration to the first row
of the table according to the index</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="csv_source.CsvCursor.Next">
<span class="sig-name descname"><span class="pre">Next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#csv_source.CsvCursor.Next" title="Link to this definition">¶</a></dt>
<dd><p>Advance to the next item.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="csv_source.CsvCursor.Rowid">
<span class="sig-name descname"><span class="pre">Rowid</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#csv_source.CsvCursor.Rowid" title="Link to this definition">¶</a></dt>
<dd><p>Return a unique id of the row along all records</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="csv_source.VTSource">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">csv_source.</span></span><span class="sig-name descname"><span class="pre">VTSource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#csv_source.VTSource" title="Link to this definition">¶</a></dt>
<dd><p>Virtual table data source for a single file.
This gets registered with the apsw Connection through createmodule
in order to instantiate the virtual table.</p>
<dl class="py method">
<dt class="sig sig-object py" id="csv_source.VTSource.Connect">
<span class="sig-name descname"><span class="pre">Connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_module_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_db_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#csv_source.VTSource.Connect" title="Link to this definition">¶</a></dt>
<dd><p>Create the specified virtual table by creating its schema
and an apsw table (a StreamingTable instance) streaming over its data</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="csv_source.VTSource.Create">
<span class="sig-name descname"><span class="pre">Create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_module_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_db_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#csv_source.VTSource.Create" title="Link to this definition">¶</a></dt>
<dd><p>Create the specified virtual table by creating its schema
and an apsw table (a StreamingTable instance) streaming over its data</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="csv_source.VTSource.get_container_iterator">
<span class="sig-name descname"><span class="pre">get_container_iterator</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#csv_source.VTSource.get_container_iterator" title="Link to this definition">¶</a></dt>
<dd><p>Return an iterator over the int identifiers of all data files</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="csv_source.VTSource.get_container_name">
<span class="sig-name descname"><span class="pre">get_container_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_fid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#csv_source.VTSource.get_container_name" title="Link to this definition">¶</a></dt>
<dd><p>Return the name of the file corresponding to the specified fid</p>
</dd></dl>

</dd></dl>

<p id="module-xml">Core XML support for Python.</p>
<p>This package contains four sub-packages:</p>
<dl class="simple">
<dt>dom – The W3C Document Object Model.  This supports DOM Level 1 +</dt><dd><p>Namespaces.</p>
</dd>
</dl>
<p>parsers – Python wrappers for XML parsers (currently only supports Expat).</p>
<dl class="simple">
<dt>sax – The Simple API for XML, developed by XML-Dev, led by David</dt><dd><p>Megginson and ported to Python by Lars Marius Garshol.  This
supports the SAX 2 API.</p>
</dd>
<dt>etree – The ElementTree XML library.  This is a subset of the full</dt><dd><p>ElementTree XML release.</p>
</dd>
</dl>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">alexandria3k</a></h1>



<p class="blurb">Local relational access to openly-available publication data sets</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=dspinellis&repo=alexandria3k&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloading.html">Data downloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="use.html">Use overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli-eg.html">Command line examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-eg.html">Python API examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="app-eg.html">Application examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="schema.html">Schema diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-api.html">Python user API</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Python plugin API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-db_schema">db_schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-data_source">data_source</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-csv_source">csv_source</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="utility-api.html">Python utility API</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev.html">Development processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-plugin.html">Plugin development</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ: Frequently asked questions</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="None">Version: 3.6.0</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="link_works_asjcs.html" title="previous chapter">Link works with their ASJC subject codes</a></li>
      <li>Next: <a href="utility-api.html" title="next chapter">Python utility API</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2022-2025, Diomidis Spinellis.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/plugin-api.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>