<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Development processes &#8212; alexandria3k 3.6.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=5349f462"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Plugin development" href="dev-plugin.html" />
    <link rel="prev" title="Performance monitoring" href="perf.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="development-processes">
<h1>Development processes<a class="headerlink" href="#development-processes" title="Link to this heading">¶</a></h1>
<p>For software development purposes <em>alexandria3k</em> can also be installed
and used through its <a class="reference external" href="https://github.com/dspinellis/alexandria3k">Github
repository</a>, rather than
as a Python package.</p>
<section id="installation">
<span id="installation-1"></span><h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">¶</a></h2>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/dspinellis/alexandria3k.git
<span class="nb">cd</span><span class="w"> </span>alexandra3k/src
pipenv<span class="w"> </span>install
</pre></div>
</div>
</section>
<section id="development-environment">
<h2>Development environment<a class="headerlink" href="#development-environment" title="Link to this heading">¶</a></h2>
<p>Perform the following steps for setting up a virtual environment
with the required development dependencies.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># While in alexandria3k/src directory</span>

<span class="c1"># Install development dependencies</span>
pipenv<span class="w"> </span>install<span class="w"> </span>--dev

<span class="c1"># Launch a shell in the virtual environment</span>
pipenv<span class="w"> </span>shell
</pre></div>
</div>
<p>You can then run the command-line version from the source distribution on the
top-level directory as follows:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>bin/a3k<span class="w"> </span>--help
</pre></div>
</div>
</section>
<section id="continuous-integration">
<h2>Continuous integration<a class="headerlink" href="#continuous-integration" title="Link to this heading">¶</a></h2>
<p>GitHub actions are used for running unit tests, linting, verifying the
code’s format, as well as building the package and the documentation
when a new commit is pushed to GitHub.
Before doing so, it’s advisable to perform these actions locally,
as detailed in the following sections.
In addition, testing, formatting, and linting can be easilly configured
to be run as a fast Git pre-commit hook by running the following commands
at the top-level directory.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;#!/bin/sh\nbin/pre-commit\n&#39;</span><span class="w"> </span>&gt;.git/hooks/pre-commit
chmod<span class="w"> </span>+x<span class="w"> </span>.git/hooks/pre-commit
</pre></div>
</div>
</section>
<section id="debugging-and-logging">
<h2>Debugging and logging<a class="headerlink" href="#debugging-and-logging" title="Link to this heading">¶</a></h2>
<p>Much of the <em>alexandria3k</em> code is executed by means of callbacks
through the <em>SQLite</em> <em>apsw</em> module.
This makes it difficult to trace and debug.
The liberal use of <code class="docutils literal notranslate"><span class="pre">print</span></code> statements is your friend.
In addition, <em>alexandria3k</em> offers many debug options,
which you should be using for troubleshooting.
Run <code class="docutils literal notranslate"><span class="pre">a3k</span> <span class="pre">--help</span></code> to see which options are available.</p>
</section>
<section id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Link to this heading">¶</a></h2>
<section id="python-unit-and-integration-tests">
<h3>Python unit and integration tests<a class="headerlink" href="#python-unit-and-integration-tests" title="Link to this heading">¶</a></h3>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># While in the top-level directory</span>
python3<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>discover<span class="w"> </span>-s<span class="w"> </span>.
</pre></div>
</div>
</section>
<section id="sql-unit-tests">
<h3>SQL unit tests<a class="headerlink" href="#sql-unit-tests" title="Link to this heading">¶</a></h3>
<p>To run SQL unit tests install
<a class="reference external" href="https://github.com/dspinellis/rdbunit">rdbunit</a> and the
<a class="reference external" href="https://www.sqlite.org/index.html">SQLite</a> command-line tool.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># While in the top-level directory</span>
<span class="k">for</span><span class="w"> </span>t<span class="w"> </span><span class="k">in</span><span class="w"> </span>tests/*.rdbu<span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span>rdbunit<span class="w"> </span>--database<span class="o">=</span>sqlite<span class="w"> </span><span class="nv">$t</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sqlite3<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">done</span>
</pre></div>
</div>
</section>
</section>
<section id="code-formatting">
<h2>Code formatting<a class="headerlink" href="#code-formatting" title="Link to this heading">¶</a></h2>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># While in the top-level directory</span>
find<span class="w"> </span>src<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;*.py&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>black<span class="w"> </span>-l<span class="w"> </span><span class="m">79</span>
</pre></div>
</div>
</section>
<section id="linting">
<h2>Linting<a class="headerlink" href="#linting" title="Link to this heading">¶</a></h2>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># While in the top-level directory</span>
find<span class="w"> </span>src<span class="w"> </span>-name<span class="w"> </span><span class="s1">&#39;*.py&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>pylint<span class="w"> </span>--rcfile<span class="w"> </span>.pylintrc
</pre></div>
</div>
</section>
<section id="plugin-documentation">
<h2>Plugin documentation<a class="headerlink" href="#plugin-documentation" title="Link to this heading">¶</a></h2>
<p>When data source or processing plugins are added the Python API
documentation must be updated as follows.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># While in the top-level directory</span>
bin/update-python-api
</pre></div>
</div>
<p>For users on MacOS, this might require installing the
<a class="reference external" href="https://formulae.brew.sh/formula/gnu-sed">GNU sed</a> package.</p>
</section>
<section id="application-examples-documentation">
<h2>Application examples documentation<a class="headerlink" href="#application-examples-documentation" title="Link to this heading">¶</a></h2>
<p>When new application examples are added in the <code class="docutils literal notranslate"><span class="pre">examples</span></code> directory
documentation must be updated as follows.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># While in the top-level directory</span>
bin/update-app-eg
</pre></div>
</div>
<p>This requires an installed version of <a class="reference external" href="https://pandoc.org/">Pandoc</a>.</p>
</section>
<section id="documentation-introduction">
<h2>Documentation introduction<a class="headerlink" href="#documentation-introduction" title="Link to this heading">¶</a></h2>
<p>The documentation’s introduction is create from the source code
repository’s <code class="docutils literal notranslate"><span class="pre">README.md</span></code> file.
When that file is changed, the documentaiton introduction
must be updated as follows.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># While in the top-level directory</span>
bin/update-intro
</pre></div>
</div>
<p>This requires an installed version of <a class="reference external" href="https://pandoc.org/">Pandoc</a>.</p>
</section>
<section id="database-schema-diagrams">
<h2>Database schema diagrams<a class="headerlink" href="#database-schema-diagrams" title="Link to this heading">¶</a></h2>
<p>After the database schema has changed, its relational diagrams in the
documentation must be updated as follows.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># While in the top-level directory</span>
bin/update-schema
</pre></div>
</div>
<p>This requires an installed version of the <a class="reference external" href="https://graphviz.org/">GraphViz</a>
<em>dot</em> command.</p>
</section>
<section id="building">
<h2>Building<a class="headerlink" href="#building" title="Link to this heading">¶</a></h2>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># While in the top-level directory</span>
hatch<span class="w"> </span>build<span class="w"> </span>dist/
</pre></div>
</div>
<p>This will result in built files being placed in the <code class="docutils literal notranslate"><span class="pre">dist</span></code> directory.</p>
</section>
<section id="documentation-building">
<h2>Documentation building<a class="headerlink" href="#documentation-building" title="Link to this heading">¶</a></h2>
<p>The process for converting the documentation into HTML and a Unix <em>man</em> page
is documented in the
<a class="reference internal" href="installation.html"><span class="doc">installation instructions</span></a>.</p>
</section>
<section id="adding-a-new-data-source">
<h2>Adding a new data source<a class="headerlink" href="#adding-a-new-data-source" title="Link to this heading">¶</a></h2>
<p>Adding a new data source to <em>alexandria3k</em> involves the addition of a
new plugin, as described in <a class="reference internal" href="dev-plugin.html"><span class="doc">Plugin development</span></a>.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">alexandria3k</a></h1>



<p class="blurb">Local relational access to openly-available publication data sets</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=dspinellis&repo=alexandria3k&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloading.html">Data downloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="use.html">Use overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli-eg.html">Command line examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-eg.html">Python API examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="app-eg.html">Application examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="schema.html">Schema diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-api.html">Python user API</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugin-api.html">Python plugin API</a></li>
<li class="toctree-l1"><a class="reference internal" href="utility-api.html">Python utility API</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Development processes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#development-environment">Development environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#continuous-integration">Continuous integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#debugging-and-logging">Debugging and logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#code-formatting">Code formatting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#linting">Linting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plugin-documentation">Plugin documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#application-examples-documentation">Application examples documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#documentation-introduction">Documentation introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#database-schema-diagrams">Database schema diagrams</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building">Building</a></li>
<li class="toctree-l2"><a class="reference internal" href="#documentation-building">Documentation building</a></li>
<li class="toctree-l2"><a class="reference internal" href="#adding-a-new-data-source">Adding a new data source</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dev-plugin.html">Plugin development</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ: Frequently asked questions</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="None">Version: 3.6.0</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="perf.html" title="previous chapter">Performance monitoring</a></li>
      <li>Next: <a href="dev-plugin.html" title="next chapter">Plugin development</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2022-2025, Diomidis Spinellis.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/dev.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>